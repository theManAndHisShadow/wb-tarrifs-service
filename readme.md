<img width="1525" height="855" alt="image" src="https://github.com/user-attachments/assets/3e50606e-6016-4d5f-adbf-5edc317e6a42" />


# WB Tarrifs Service

–°–µ—Ä–≤–∏—Å –¥–ª—è:
- —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–æ–≤ WB —á–µ—Ä–µ–∑ API –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Ö –≤ PostgreSQL,
- —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ Google Sheets,
- —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –∏—Å—Ç–∏–Ω—ã.

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é `Docker` –∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π üöÄ

# ‚ö°Ô∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
```zsh
git clone https://github.com/theManAndHisShadow/wb-tarrifs-service.git
cd wb-prices-service
```

2. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ñ–∞–π–ª `credentials.json` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ `Google Sheets` API.
–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ:
- –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –≤ —Å–≤–æ–π –≥—É–≥–ª –∞–∫–∫–∞—É–Ω—Ç
- –ø–µ—Ä–µ–π—Ç–∏ –≤ [Google Cloud Console](https://console.cloud.google.com/)
- –≤—ã–±–µ—Ä–∏ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π
- –ø–µ—Ä–µ–π—Ç–∏ –≤ IAM & Admin ‚Üí Service Accounts ‚Üí Create Service Account
- –Ω—É–∂–Ω–æ –¥–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–≤—Ä–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É, –Ω–∞–ø—Ä–∏–º–µ—Ä sheets-updater
- –≤ —Å–ø–∏—Å–∫–µ —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
- –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ ‚Üí –≤–∫–ª–∞–¥–∫–∞ Keys ‚Üí Add Key ‚Üí Create New Key ‚Üí JSON
- —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä ‚Äî —ç—Ç–æ –∏ –µ—Å—Ç—å `credentials.json`


3. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ `.env`
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä `example.env` –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π `.env` –∏ –ø—Ä–∏–≤–µ–¥–∏—Ç–µ —Ñ–∞–π–ª –∫ –≤–∏–¥—É:
```env
# PostgreSQL
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
APP_PORT=5000
NODE_ENV=production

# API WB
API_KEY=–í–ê–®_–ö–õ–Æ–ß_–ö_API_WB

# Google Sheets
# –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ –ø–æ–ª–æ–∂–∏—Ç—å credentials.json –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
GOOGLE_SERVICE_ACCOUNT_CREDENTIALS_PATH=./credentials.json

# –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É –∏–º–µ–µ—Ç –≤–∏–¥:
# https://docs.google.com/spreadsheets/d/1GL2tn–¢21jXI91Qnr14GzbH1HZSLOgLhMVoQy-SsuL8/
# –≤–∑—è—Ç—å –≤—Å—ë, —á—Ç–æ –º–µ–∂–¥—É /d/ –∏ /
# –í–ê–ñ–ù–û! –í–∞—à —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ –ø–æ —Å—Å—ã–ª–∫–µ
SHEET_IDS=["1GL2tn–¢21jXI91Qnr14GzbH1HZSLOgLhMVoQy-SsuL8", ...]
```
![telegram-cloud-photo-size-2-5406811978657299152-x](https://github.com/user-attachments/assets/3a3a6b08-1dc1-41be-8157-1e106ecc9984)

4. –ü–æ–¥–Ω–∏–º–∏—Ç–µ —Å–µ—Ä–≤–∏—Å —á–µ—Ä–µ–∑ Docker üê≥
   
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `Docker` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω –∫–æ–º–∞–Ω–¥–æ–π:
```zsh
docker compose up --build
```
–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ Linux —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ —Å–∫–∞—á–∏–≤–∞—Ç—å –ø–∞–∫–µ—Ç `docker-compose`. 

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
1. –ß–µ—Ä–µ–∑ psql –∏–ª–∏ –ª—é–±–æ–π GUI-–∫–ª–∏–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, TablePlus / DBeaver) –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL:
```yaml
Host: localhost
Port: 5432
User: postgres
Password: postgres
Database: postgres
```
2.–í –ª–æ–≥–∞—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ app –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```zsh
Data from WB API synchronized to https://docs.google.com/spreadsheets/d/<ID>/
```
3. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ –∏–∑ –ª–æ–≥–æ–≤ (https://docs.google.com/spreadsheets/d/<ID>/) –∏ –Ω–∞ –≤–∫–ª–∞–∫–¥–µ "stocks_coefs" –±—É–¥—É—Ç —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ —å–µ–∫—É—â–µ–≥–æ –¥–Ω—è –∑–∞ —á–∞—Å.

# –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- `Node.js 20` + `TypeScript` - –ª–æ–≥–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
- `PostgreSQL 16` - —Ç—É—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- `Knex.js` ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–∏–¥—ã –∏ –∑–∞–ø—Ä–æ—Å—ã
- `Google Sheets` API - –≤–∏—Ç—Ä–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö
- `Docker` / `Docker Compose` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ —Å–±–æ—Ä–∫–∞
